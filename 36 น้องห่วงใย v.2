import ipywidgets as widgets
from IPython.display import display, clear_output

# --- à¸ªà¹„à¸•à¸¥à¹Œà¸„à¸§à¸²à¸¡à¸™à¹ˆà¸²à¸£à¸±à¸ ---
style = "<style>.widget-label { color: #7B1FA2 !important; font-weight: bold; }</style>"
display(widgets.HTML(style))

# --- à¸ªà¹ˆà¸§à¸™à¸«à¸±à¸§à¹à¸­à¸› ---
header = widgets.HTML("<h2>ğŸ”®âœ¨ à¸ªà¸§à¸±à¸ªà¸”à¸µà¸„à¹ˆà¸°à¸„à¸™à¸”à¸µ 'à¸™à¹‰à¸­à¸‡à¸«à¹ˆà¸§à¸‡à¹ƒà¸¢' à¸¡à¸²à¹à¸¥à¹‰à¸§ âœ¨ğŸ”®</h2>")
sub_header = widgets.HTML("<p style='color: #9C27B0;'>à¸„à¸™à¸™à¹ˆà¸²à¸£à¸±à¸à¸¡à¸²à¸Šà¹ˆà¸§à¸¢à¸à¸±à¸™à¸”à¸¹à¹à¸¥à¸šà¹‰à¸²à¸™à¸™à¸°à¸„à¸° ğŸ’œ</p>")

# --- à¸Šà¹ˆà¸­à¸‡à¸à¸£à¸­à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ ---
name_in = widgets.Text(placeholder='à¹€à¸Šà¹ˆà¸™ à¹à¸­à¸£à¹Œ, à¸à¸±à¸”à¸¥à¸¡', description='ğŸŒ¸ à¸­à¸¸à¸›à¸à¸£à¸“à¹Œ:')
limit_in = widgets.FloatText(value=0, description='â³ à¸ˆà¸³à¸à¸±à¸” (à¸Šà¸¡.):')
used_in = widgets.FloatText(value=0, description='âŒ› à¹ƒà¸Šà¹‰à¸ˆà¸£à¸´à¸‡ (à¸Šà¸¡.):')

# --- à¸›à¸¸à¹ˆà¸¡à¸à¸”à¸ªà¸¸à¸”à¸„à¸´à¹‰à¸§à¸—à¹Œ ---
btn_add = widgets.Button(description='âœ¨ à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¹€à¸¥à¸¢à¸„à¸™à¹€à¸à¹ˆà¸‡ âœ¨', 
                         button_style='info', # à¸ªà¸µà¸Ÿà¹‰à¸²/à¸¡à¹ˆà¸§à¸‡
                         layout=widgets.Layout(width='250px'))
btn_add.style.button_color = '#CE93D8' # à¸ªà¸µà¸¡à¹ˆà¸§à¸‡à¸à¸²à¸ªà¹€à¸—à¸¥

output = widgets.Output()

# --- à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™à¸à¸²à¸£à¸—à¸³à¸‡à¸²à¸™ ---
def on_click(b):
    with output:
        clear_output()
        name = name_in.value.strip()
        limit = limit_in.value
        used = used_in.value
        
        # à¹€à¸Šà¹‡à¸„à¸„à¸³à¸§à¹ˆà¸² "à¸à¸­"
        if any(w in name for w in ["à¸à¸­", "à¸à¸­à¹à¸¥à¹‰à¸§", "à¸à¸­à¸„à¹ˆà¸°", "à¸à¸­à¸„à¸£à¸±à¸š"]):
            print("ğŸ¬ à¸‚à¸­à¸šà¸„à¸¸à¸“à¸—à¸µà¹ˆà¹ƒà¸«à¹‰ 'à¸™à¹‰à¸­à¸‡à¸«à¹ˆà¸§à¸‡à¹ƒà¸¢' à¸”à¸¹à¹à¸¥à¸šà¹‰à¸²à¸™à¸™à¸°à¸„à¸°... à¸šà¹Šà¸²à¸¢à¸šà¸²à¸¢à¸„à¹ˆà¸°à¸„à¸™à¹€à¸à¹ˆà¸‡ ğŸ¬")
            print("ğŸ‘©â€ğŸ’» à¹€à¸‚à¸µà¸¢à¸™à¹‚à¸›à¸£à¹à¸à¸£à¸¡à¸”à¹‰à¸§à¸¢à¸„à¸§à¸²à¸¡à¸£à¸±à¸à¹‚à¸”à¸¢ : nong katoon")
            return

        if name:
            if used > limit:
                print(f"ğŸš¨ {name}: à¹€à¸à¸´à¸™à¹€à¸§à¸¥à¸²à¹à¸¥à¹‰à¸§à¸„à¹ˆà¸°à¸„à¸™à¸”à¸µ! ğŸ“´ à¸ªà¸±à¹ˆà¸‡à¸›à¸´à¸”à¸—à¸±à¸™à¸—à¸µà¸™à¹‰à¸² âœ¨")
            else:
                print(f"ğŸ«§ {name}: à¸¢à¸±à¸‡à¸›à¸¥à¸­à¸”à¸ à¸±à¸¢à¸”à¸µà¸„à¹ˆà¸°à¸„à¸™à¹€à¸à¹ˆà¸‡ (à¹€à¸«à¸¥à¸·à¸­à¸­à¸µà¸ {limit-used:.1f} à¸Šà¸¡.) ğŸ’")
        else:
            print("ğŸ¥º à¸„à¸™à¸”à¸µà¸¥à¸·à¸¡à¹ƒà¸ªà¹ˆà¸Šà¸·à¹ˆà¸­à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¹ƒà¸Šà¹‰à¹„à¸Ÿà¸Ÿà¹‰à¸²à¸«à¸£à¸·à¸­à¹€à¸›à¸¥à¹ˆà¸²à¸„à¸°?")

btn_add.on_click(on_click)

# --- à¹€à¸„à¸£à¸”à¸´à¸•à¸šà¸£à¸£à¸—à¸±à¸”à¸ªà¸¸à¸”à¸—à¹‰à¸²à¸¢ ---
footer = widgets.HTML("<br><p style='color: #9C27B0; font-style: italic;'>ğŸ¬ à¹€à¸‚à¸µà¸¢à¸™à¹‚à¸›à¸£à¹à¸à¸£à¸¡à¸”à¹‰à¸§à¸¢à¸„à¸§à¸²à¸¡à¸£à¸±à¸à¹‚à¸”à¸¢ : nong katoon ğŸ¬</p>")

# --- à¹à¸ªà¸”à¸‡à¸œà¸¥à¹à¸­à¸› ---
app_ui = widgets.VBox([header, sub_header, name_in, limit_in, used_in, btn_add, output, footer], 
                      layout=widgets.Layout(align_items='center', background_color='#F3E5F5', padding='20px'))
display(app_ui)
